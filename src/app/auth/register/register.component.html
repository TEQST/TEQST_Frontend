<form *ngIf="currentRegisterStep === 1" [formGroup]="stepOneForm" (ngSubmit)="nextStep()"
  (keyup.enter)="stepOneForm?.valid ? nextStep() : undefined">
  <ion-item lines="full">
    <ion-label position="floating">{{ 'Username' | translate }}</ion-label>
    <ion-input formControlName="username" type="text" id="username">
    </ion-input>
  </ion-item>
  <div class="error" *ngIf="errorControl.username.errors?.required && errorControl.username.touched">
    Username is required.
  </div>
  <div class="warning" *ngIf="stepOneForm.controls.username.pending">
    Checking username...
  </div>
  <div class="error" *ngIf="!errorControl.username.valid && !errorControl.username.pending && !errorControl.username.errors?.required">
    Username is already taken.
  </div>
  <ion-item id="password-item" lines="full">
    <ion-label position="floating">{{ 'Password' | translate }}</ion-label>
    <ion-button id="toggle-password" fill=clear slot="end" (click)="showPassword = !showPassword">
      <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
    </ion-button>
    <ion-input formControlName="password" [type]="showPassword ? 'text' : 'password'" id="password"></ion-input>
  </ion-item>
  <ion-item lines="full">
    <ion-label position="floating">{{'Year of birth' | translate}}</ion-label>
    <ion-input formControlName="birth_year" inputmode="decimal"></ion-input>
  </ion-item>
  <div class="error" *ngIf="!errorControl.birth_year.valid && errorControl.birth_year.touched">
    Please enter the year in the format YYYY. Example: 1992
  </div>
  <ion-item lines="full">
    <ion-label position="floating">{{'Language' | translate}}</ion-label>
    <ion-select multiple="true" formControlName="language_ids">
      <ion-select-option *ngFor="let lang of allLangs" value={{lang.short}}>{{lang.native_name}}</ion-select-option>
    </ion-select>
  </ion-item>
  <ion-item lines="full" >
    <ion-checkbox #cbox formControlName="checkbox"></ion-checkbox>
    <ion-label (click)="cbox.checked = !cbox.checked" class="cbox-label">I accept the <a [routerLink]="" (click)="presentServicesAgreement()">Services Agreement</a></ion-label>
  </ion-item>
  <ion-button class="button-submit" type="submit" [disabled]="!stepOneForm.valid" expand="block">{{'Next' | translate}}
  </ion-button>
</form>


<div *ngIf="currentRegisterStep === 2">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="previousStep()">
        <ion-icon name="arrow-back-outline"></ion-icon>    </ion-button>
    </ion-buttons>
  </ion-toolbar>

  <form [formGroup]="stepTwoForm" (ngSubmit)="performRegister()"
    (keyup.enter)="stepTwoForm.valid ? performRegister() : undefined">
    <ion-item lines="full">
      <ion-label position="floating">{{'Email' | translate}}: </ion-label>
      <ion-input formControlName="email"></ion-input>
    </ion-item>
    <ion-item lines="full">
      <ion-label position="floating">{{'Country' | translate}}: </ion-label>
      <ion-input formControlName="country"></ion-input>
    </ion-item>
    <ion-item lines="full">
      <ion-label position="floating">{{'Accent' | translate}}: </ion-label>
      <ion-input name="accent" formControlName="accent"></ion-input>
    </ion-item>
  
    <ion-item lines="full">
      <ion-label position="floating">{{'Education Level' | translate}}:</ion-label>
      <ion-select name="education" formControlName="education">
        <ion-select-option value="B6">{{'0-6 years' | translate}}</ion-select-option>
        <ion-select-option value="6T12">{{'6-12 years' | translate}}</ion-select-option>
        <ion-select-option value="M12">{{'more than 12 years' | translate}}</ion-select-option>
      </ion-select>
    </ion-item>
  
    <ion-item lines="full">
      <ion-label position="floating">{{'Gender' | translate}}:</ion-label>
      <ion-select name="gender" formControlName="gender">
        <ion-select-option value="F">{{'Female' | translate}}</ion-select-option>
        <ion-select-option value="M">{{'Male' | translate}}</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-button class="button-submit" type="submit" expand="block">{{'Register' | translate}}
    </ion-button>
  </form>
</div>

<ion-card-content>
  <ng-container>{{'Already have an Account?' | translate}}</ng-container>
  <p><a routerLink="/login" class="login-redirect">{{'Login here' | translate }}</a></p>
</ion-card-content>